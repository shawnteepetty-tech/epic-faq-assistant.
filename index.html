<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Epic Go-Live FAQ Assistant</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f5f7fa;
      margin: 0;
      padding: 0;
      color: #333;
    }
    header {
      background: #003366;
      color: white;
      padding: 1rem;
      text-align: center;
    }
    .container {
      max-width: 900px;
      margin: 2rem auto;
      padding: 1rem;
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.15);
    }
    h2 {
      color: #003366;
      margin-top: 2rem;
    }
    details {
      margin-bottom: 0.8rem;
      border: 1px solid #ddd;
      border-radius: 6px;
      padding: 0.5rem 1rem;
      background: #fafafa;
    }
    summary {
      cursor: pointer;
      font-weight: bold;
      color: #003366;
    }
    .steps {
      margin: 0.5rem 0 0.5rem 1rem;
      padding-left: 1rem;
      border-left: 3px solid #003366;
    }
    .steps li {
      margin: 0.3rem 0;
    }
  </style>
</head>
<body>
  <header>
    <h1>Epic Go-Live FAQ Assistant</h1>
  </header>
  <div class="container" id="content">
    <p>Loading FAQs...</p>
  </div>

  <script>
    async function loadFAQs() {
      try {
        const response = await fetch("epic_go_live_faq.json");
        const data = await response.json();

        const container = document.getElementById("content");
        container.innerHTML = "";

        // All modules except Go-Live Preparation
        data
          .filter(m => m.module !== "Go-Live Preparation")
          .forEach(module => {
            const moduleDiv = document.createElement("div");
            moduleDiv.innerHTML = `<h2>${module.module}</h2>`;

            // Steps as collapsible How To
            if (module.steps && module.steps.length > 0) {
              module.steps.forEach(stepBlock => {
                const details = document.createElement("details");
                details.innerHTML = `<summary>üìò How to: ${stepBlock.title}</summary>`;
                if (stepBlock.items) {
                  const ul = document.createElement("ul");
                  ul.className = "steps";
                  stepBlock.items.forEach(item => {
                    const li = document.createElement("li");
                    li.textContent = item;
                    ul.appendChild(li);
                  });
                  details.appendChild(ul);
                }
                moduleDiv.appendChild(details);
              });
            }

            // FAQs
            if (module.qa && module.qa.length > 0) {
              module.qa.forEach(item => {
                const qaDetails = document.createElement("details");
                qaDetails.innerHTML = `<summary>‚ùì ${item.q}</summary><p>${item.a}</p>`;
                moduleDiv.appendChild(qaDetails);
              });
            }

            container.appendChild(moduleDiv);
          });

        // Nursing Tip Sheets section
        const nursingDiv = document.createElement("div");
        nursingDiv.innerHTML = `<h2>Nursing Tip Sheets</h2>`;
        const nursingSheets = [
          "Epic Essentials",
          "IP Charges Tip Sheet - Copy",
          "Inpatient Nurse - Orders",
          "Inpatient Nurse - Review the Chart",
          "Inpatient Nurse - Transfer",
          "Inpatient Nurse - Vitals and Assessments",
          "Inpatient Nurse - Work List",
          "Isolation Order BPA",
          "Iv infusion workflow",
          "LVN RN Cosign Notes - Tip Sheet",
          "MAR Administration - Tip Sheet",
          "MAR Skin Sub - Tip Sheet",
          "MAR Skin Sub - SCPA Wound",
          "MRI Screening Form - Tip Sheet",
          "Marking a deceased patient bed for cleaning",
          "Med Admin CR",
          "MyChart Signup TipSheet",
          "Note Type tip sheet",
          "Nurse Assessment",
          "Nurse Quick Start Guide (Full-Page)",
          "OnBase new tip sheet",
          "Organ Donor - Tip Sheet",
          "PPD Tip Sheet_2018",
          "PT Movement to Psych",
          "PTA Med Review Tipsheet - Prime",
          "Patient Movement Discharge to SNF",
          "Patient Movement Inpatient to Psych",
          "Patient Movement Using Discharge Readmit Navigator",
          "Preassign Nurses",
          "Preferred Pharmacy",
          "Psychotropic Medication E-consent",
          "RN - Resulting a POCT",
          "Record of Death tip sheet",
          "Reprint label tip sheet",
          "Restraint Work List tip sheet",
          "Review PTA Meds Tip Sheet",
          "Reviewing Charges - Tip Sheet",
          "Scanning specimen tip sheet",
          "Sepsis tip sheet",
          "TB Test Documentation",
          "The Work List",
          "Tip Sheet Manual Chart Correction Flowsheets",
          "Tip Sheet Manual Chart Correction Notes",
          "Undo Discharge tip sheet",
          "Unit Clerk - Admitting & Discharging & Transferring",
          "Unreadable barcode tip sheet",
          "Update Accommodation Code",
          "Using Transport Clinical Staff",
          "Wound RN Charging",
          "ordering blood",
          "psychotropic med tip sheet"
        ];
        nursingSheets.forEach(title => {
          const details = document.createElement("details");
          details.innerHTML = `<summary>${title}</summary><p>[Placeholder ‚Äì Tip Sheet coming soon]</p>`;
          nursingDiv.appendChild(details);
        });
        container.appendChild(nursingDiv);

        // Go-Live Preparation always last
        const goLive = data.find(m => m.module === "Go-Live Preparation");
        if (goLive) {
          const goDiv = document.createElement("div");
          goDiv.innerHTML = `<h2>${goLive.module}</h2>`;

          if (goLive.steps && goLive.steps.length > 0) {
            goLive.steps.forEach(stepBlock => {
              const details = document.createElement("details");
              details.innerHTML = `<summary>${stepBlock.title}</summary>`;
              if (stepBlock.items) {
                const ul = document.createElement("ul");
                ul.className = "steps";
                stepBlock.items.forEach(item => {
                  const li = document.createElement("li");
                  li.textContent = item;
                  ul.appendChild(li);
                });
                details.appendChild(ul);
              }
              goDiv.appendChild(details);
            });
          }

          if (goLive.qa && goLive.qa.length > 0) {
            goLive.qa.forEach(item => {
              const qaDetails = document.createElement("details");
              qaDetails.innerHTML = `<summary>‚ùì ${item.q}</summary><p>${item.a}</p>`;
              goDiv.appendChild(qaDetails);
            });
          }

          container.appendChild(goDiv);
        }

      } catch (error) {
        document.getElementById("content").innerHTML =
          `<p style="color:red;">‚ö†Ô∏è Error loading FAQs: ${error.message}</p>`;
      }
    }

    loadFAQs();
  </script>
</body>
</html>
