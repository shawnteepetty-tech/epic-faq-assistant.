<script>
  fetch('epic_go_live_faq.json')
    .then(response => response.json())
    .then(data => {
      const container = document.getElementById('faqs');
      container.innerHTML = '';

      data.forEach(section => {
        // Module header
        const deptHeader = document.createElement('h2');
        deptHeader.textContent = section.module;
        container.appendChild(deptHeader);

        // Questions inside module
        section.qa.forEach(item => {
          const div = document.createElement('div');
          div.className = 'faq-item';

          let answerHTML = `<div class="faq-answer">A: ${item.a || "No answer provided"}`;
          if (item.steps && item.steps.length > 0) {
            answerHTML += "<br><br><strong>Click-by-Click Steps:</strong><ol>";
            item.steps.forEach(step => {
              answerHTML += `<li>${step}</li>`;
            });
            answerHTML += "</ol>";
          }
          answerHTML += "</div>";

          div.innerHTML = `
            <div class="faq-question">Q: ${item.q}</div>
            ${answerHTML}
          `;

          // Expand/collapse
          div.querySelector('.faq-question').addEventListener('click', () => {
            div.classList.toggle('active');
          });

          container.appendChild(div);
        });
      });
    })
    .catch(err => {
      document.getElementById('faqs').innerHTML =
        '<p class="error">⚠️ Error loading FAQs: ' + err.message + '</p>';
    });
</script>
