<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Epic Go-Live FAQ Assistant</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f4f6f9; margin: 0; padding: 0; }
    header { background: #003366; color: white; padding: 15px; text-align: center; font-size: 1.5em; }
    main { max-width: 900px; margin: 20px auto; padding: 0 20px; }

    h2 { margin-top: 30px; color: #003366; }
    .roles { font-style: italic; margin: 5px 0 15px; }

    .collapsible {
      background: #0055aa;
      color: white;
      cursor: pointer;
      padding: 12px;
      width: 100%;
      text-align: left;
      border: none;
      outline: none;
      font-size: 1em;
      margin-top: 10px;
      border-radius: 4px;
    }
    .collapsible:after { content: '+'; float: right; }
    .collapsible.active:after { content: '-'; }

    .content {
      padding: 0 15px;
      max-height: 0;
      overflow: hidden;
      background: #fff;
      transition: max-height 0.2s ease-out;
      border: 1px solid #ddd;
      border-radius: 4px;
      margin-bottom: 10px;
    }
    ol { margin: 10px 0; padding-left: 20px; }

    .faq-item { margin: 10px 0; }
    .faq-q { cursor: pointer; background: #eee; padding: 10px; border-radius: 4px; }
    .faq-a { display: none; padding: 10px; background: #fafafa; border-left: 3px solid #0055aa; }
  </style>
</head>
<body>
  <header>Epic Go-Live FAQ Assistant</header>
  <main>
    <div id="faqs">Loading FAQs...</div>
  </main>

  <script>
    fetch('epic_go_live_faq.json')
      .then(response => response.json())
      .then(data => {
        const container = document.getElementById('faqs');
        container.innerHTML = '';

        data.forEach(section => {
          const h2 = document.createElement('h2');
          h2.textContent = section.module;
          container.appendChild(h2);

          if (section.roles) {
            const roles = document.createElement('div');
            roles.className = 'roles';
            roles.textContent = "Roles: " + section.roles.join(', ');
            container.appendChild(roles);
          }

          // Render steps with collapsible sections
          if (section.steps) {
            section.steps.forEach(stepGroup => {
              const btn = document.createElement('button');
              btn.className = 'collapsible';
              btn.textContent = stepGroup.title;
              container.appendChild(btn);

              const div = document.createElement('div');
              div.className = 'content';

              if (stepGroup.items && Array.isArray(stepGroup.items)) {
                div.innerHTML = "<ol>" +
                  stepGroup.items.map(i => `<li>${i}</li>`).join('') +
                  "</ol>";
              } else {
                div.innerHTML = "<p>No steps available</p>";
              }

              container.appendChild(div);

              btn.addEventListener('click', () => {
                btn.classList.toggle('active');
                div.style.maxHeight = div.style.maxHeight ? null : div.scrollHeight + "px";
              });
            });
          }

          // Render FAQs
          if (section.qa) {
            section.qa.forEach(item => {
              const faq = document.createElement('div');
              faq.className = 'faq-item';
              const q = document.createElement('div');
              q.className = 'faq-q';
              q.textContent = "Q: " + item.q;
              const a = document.createElement('div');
              a.className = 'faq-a';
              a.textContent = "A: " + item.a;
              q.addEventListener('click', () => {
                a.style.display = (a.style.display === 'block') ? 'none' : 'block';
              });
              faq.appendChild(q);
              faq.appendChild(a);
              container.appendChild(faq);
            });
          }
        });
      })
      .catch(err => {
        document.getElementById('faqs').innerHTML =
          '<p style="color:red;">⚠️ Error loading FAQs: ' + err.message + '</p>';
      });
  </script>
</body>
</html>
